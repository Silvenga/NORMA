<?xml version="1.0" encoding="utf-8" ?>
<se:CustomSerializedElements
    xmlns:se="http://Schemas.Northface.edu/Private/SerializationExtensions"
    xmlns:plx="http://Schemas.Northface.edu/CodeGeneration/Plix">
	<se:Using Namespace="Northface.Tools.ORM.ObjectModel">
		<se:MetaModel Class="ORMMetaModel">
			<se:Namespaces>
				<se:Namespace Prefix="orm" URI="http://Schemas.Northface.edu/ORM/ORMCore" DefaultPrefix="true"/>
				<se:Namespace Prefix="ormDerived" URI="http://Schemas.Northface.edu/ORM/ORMDerived"/>
			</se:Namespaces>
			<se:RootElements>
				<se:RootElement Class="ORMModel"/>
			</se:RootElements>
			<se:OmittedMetaElements>
				<se:OmitRelationship Class="MultiColumnExternalFactConstraint"/>
				<se:OmitRelationship Class="SingleColumnExternalFactConstraint"/>
				<se:OmitRelationship Class="ExternalRoleConstraint"/>
				<se:OmitClass Class="IntrinsicReferenceMode"/>
				<se:OmitRelationship Class="SubjectHasPresentation" Namespace="Microsoft.VisualStudio.Modeling"/>
			</se:OmittedMetaElements>
		</se:MetaModel>
		<!--Model-->
		<se:Element Class="ORMModel" Name="ORMModel" SortChildElements="true">
			<se:ChildElement Name="Objects">
				<se:Link RelationshipName="ModelHasObjectType" RoleName="ObjectTypeCollection"/>
			</se:ChildElement>
			<se:ChildElement Name="Facts">
				<se:Link RelationshipName="ModelHasFactType" RoleName="FactTypeCollection"/>
			</se:ChildElement>
			<se:ChildElement Name="ExternalConstraints">
				<se:Link RelationshipName="ModelHasMultiColumnExternalConstraint" RoleName="MultiColumnExternalConstraintCollection"/>
				<se:Link RelationshipName="ModelHasSingleColumnExternalConstraint" RoleName="SingleColumnExternalConstraintCollection"/>
			</se:ChildElement>
			<se:ChildElement Name="DataTypes">
				<se:Link RelationshipName="ModelHasDataType" RoleName="DataTypeCollection"/>
			</se:ChildElement>
			<se:ChildElement Name="CustomReferenceModes">
				<se:Link RelationshipName="ModelHasReferenceMode" RoleName="ReferenceModeCollection"/>
			</se:ChildElement>
			<se:ChildElement Name="ModelErrors">
				<se:Link RelationshipName="ModelHasError" RoleName="ErrorCollection"/>
			</se:ChildElement>
			<se:ChildElement Name="ReferenceModeKinds">
				<se:Link RelationshipName="ModelHasReferenceModeKind" RoleName="ReferenceModeKindCollection" />
			</se:ChildElement>
		</se:Element>
		<!--Object Types-->
		<se:Element Class="ObjectType" Name="EntityType" SortChildElements="true">
			<se:ConditionalName Name="ValueType">
				<plx:CallInstance name="IsValueType" style="Property">
					<plx:CallObject>
						<plx:ThisKeyword/>
					</plx:CallObject>
				</plx:CallInstance>
			</se:ConditionalName>
			<se:ConditionalName Name="ObjectifiedType">
				<plx:Operator name="IdentityInequality">
					<plx:Left>
						<plx:CallInstance name="NestedFactType" style="Property">
							<plx:CallObject>
								<plx:ThisKeyword/>
							</plx:CallObject>
						</plx:CallInstance>
					</plx:Left>
					<plx:Right>
						<plx:NullObjectKeyword/>
					</plx:Right>
				</plx:Operator>
			</se:ConditionalName>
			<se:Attribute ID="ReferenceModeString"  Name="ReferenceMode" WriteCustomStorage="true">
				<se:Condition WriteStyle="NotWritten">
					<plx:CallInstance name="IsValueType" style="Property">
						<plx:CallObject>
							<plx:ThisKeyword/>
						</plx:CallObject>
					</plx:CallInstance>
				</se:Condition>
				<se:Condition WriteStyle="NotWritten">
					<plx:Operator name="IdentityInequality">
						<plx:Left>
							<plx:CallInstance name="NestedFactType" style="Property">
								<plx:CallObject>
									<plx:ThisKeyword/>
								</plx:CallObject>
							</plx:CallInstance>
						</plx:Left>
						<plx:Right>
							<plx:NullObjectKeyword/>
						</plx:Right>
					</plx:Operator>
				</se:Condition>
			</se:Attribute>
			<se:ChildElement Name="PlayedRoles">
				<se:Link RelationshipName="ObjectTypePlaysRole" RoleName="PlayedRoleCollection"/>
			</se:ChildElement>
			<se:Link Name="ConceptualDataType" RelationshipName="ValueTypeHasDataType" RoleName="DataType" WriteStyle="PrimaryLinkElement" />
			<se:ChildElement Name="ValueConstraint">
				<se:Link RelationshipName="ValueTypeHasValueRangeDefinition" RoleName="ValueRangeDefinition"/>
			</se:ChildElement>
			<se:Link Name="Role"  RelationshipName="ObjectTypePlaysRole" RoleName="PlayedRoleCollection"/>
			<se:Link Name="NestedPredicate" RelationshipName="NestingEntityTypeHasFactType" RoleName="NestedFactType" />
			<se:Link Name="PreferredIdentifier" RelationshipName="EntityTypeHasPreferredIdentifier" RoleName="PreferredIdentifier"/>
			<!--TODO:Subtypes-->
			<!--TODO:Supertypes-->
		</se:Element>
		<se:Element Class="CustomReferenceMode" HasMixedTypedAttributes="true">
			<se:Attribute ID="CustomFormatString" WriteStyle="Element"></se:Attribute>
			<se:Link Name="Kind" RelationshipName="ReferenceModeHasReferenceModeKind" RoleName="Kind"/>
		</se:Element>
		<se:Element Class="ValueTypeHasDataType" HasMixedTypedAttributes="true">
			<se:Attribute ID="Scale">
				<se:RolePlayed ID="ValueTypeCollection" Name="Scale"/>
			</se:Attribute>
		</se:Element>
		<se:Element Class="DataType">
			<se:Link RelationshipName="ValueTypeHasDataType" RoleName="ValueTypeCollection" WriteStyle="NotWritten"/>
		</se:Element>
		<se:Element Class="ReferenceModeKind" Name="ReferenceModeKind">
			<se:Attribute ID="Name" WriteStyle="NotWritten"/>
			<se:Link RelationshipName="ReferenceModeHasReferenceModeKind" RoleName="ReferenceModeCollection" WriteStyle="NotWritten" />
		</se:Element>
		<se:Element Name="BaseValueRangeDefinition" Class="ValueRangeDefinition">
			<se:ChildElement Name="ValueRanges">
				<se:Link RelationshipName="ValueRangeDefinitionHasValueRange" RoleName="ValueRangeCollection"/>
			</se:ChildElement>
		</se:Element>
		<se:Element Class="ValueTypeValueRangeDefinition" Name="ValueRangeDefinition" Override="true"/>
		<se:Element Class="RoleValueRangeDefinition" Name="RoleValueRangeDefinition" Override="true"/>
		<!--Facts-->
		<se:Element Class="FactType" Name="Fact" SortChildElements="true">
			<!--TODO: FactNotes-->
			<!--TODO: Derivation Rule-->
			<se:ChildElement Name="FactRoles">
				<se:Link RelationshipName="FactTypeHasRole" RoleName="RoleCollection"/>
			</se:ChildElement>
			<se:ChildElement Name="ReadingOrders">
				<se:Link RelationshipName="FactTypeHasReadingOrder" RoleName="ReadingOrderCollection"/>
			</se:ChildElement>
			<se:ChildElement Name="InternalConstraints">
				<se:Link RelationshipName="FactTypeHasInternalConstraint" RoleName="InternalConstraintCollection"/>
			</se:ChildElement>
			<se:Link RelationshipName="NestingEntityTypeHasFactType" RoleName="NestingType" WriteStyle="NotWritten"/>
			<se:Link RelationshipName="FactTypeHasFactTypeRequiresInternalUniquenessConstraintError" RoleName="InternalUniquenessConstraintRequiredError" WriteStyle="NotWritten"/>
			<se:Link RelationshipName="FactTypeHasFactTypeRequiresReadingError" RoleName="ReadingRequiredError" WriteStyle="NotWritten"/>
		</se:Element>
		<!--Readings-->
		<se:Element Class="ReadingOrder">
			<se:ChildElement Name="Readings">
				<se:Link RelationshipName="ReadingOrderHasReading" RoleName="ReadingCollection"/>
			</se:ChildElement>
			<se:ChildElement Name="RoleSequence">
				<se:Link RelationshipName="ReadingOrderHasRole" RoleName="RoleCollection"/>
			</se:ChildElement>
			<se:Link RelationshipName="ReadingOrderHasRole" RoleName="RoleCollection" Name="Role"/>
		</se:Element>
		<se:Element Class="Reading" HasMixedTypedAttributes="true">
			<se:Attribute ID="Text" Name="Data" WriteStyle="Element"/>
			<se:Attribute ID="Language" WriteStyle="NotWritten"/>
		</se:Element>
		<!--Role-->
		<se:Element Class="Role">
			<se:Attribute ID="IsMandatory" Name ="IsMandatory" WriteCustomStorage="true"/>
			<se:Attribute ID="Multiplicity" Name ="Multiplicity" WriteCustomStorage="true"/>
			<se:ChildElement Name="ValueConstraint">
				<se:Link RelationshipName="RoleHasValueRangeDefinition" RoleName="ValueRangeDefinition"/>
			</se:ChildElement>
			<se:ChildElement Name="ReadingOrders">
				<se:Link RelationshipName="FactTypeHasReadingOrder" RoleName="ReadingOrderCollection"/>
			</se:ChildElement>
			<!--Need to add this attribute as custom storage.-->
			<!--<se:Attribute ID="IsFunctional" Name ="IsFunctional" WriteCustomStorage="true"/>-->
			<se:Link Name="RolePlayer" RelationshipName="ObjectTypePlaysRole" RoleName="RolePlayer"/>
			<se:Link RelationshipName="ConstraintRoleSequenceHasRole" RoleName="ConstraintRoleSequenceCollection" WriteStyle="NotWritten"/>
			<se:Link RelationshipName="ReadingOrderHasRole" RoleName="ReadingOrder" WriteStyle="NotWritten"/>
		</se:Element>
		<!--Constraints-->
		<se:Element Class="MultiColumnExternalConstraint">
			<se:ChildElement Name="RoleSequences">
				<se:Link RelationshipName="MultiColumnExternalConstraintHasRoleSequence" RoleName="RoleSequenceCollection"/>
			</se:ChildElement>
			<se:Link RelationshipName="MultiColumnExternalConstraintHasCompatibleRolePlayerTypeError" RoleName="CompatibleRolePlayerTypeErrorCollection" WriteStyle="NotWritten"/>
		</se:Element>
		<se:Element Class="MultiColumnExternalConstraintRoleSequence" Name="RoleSequence">
			<se:Link RelationshipName="ConstraintRoleSequenceHasRole" RoleName="RoleCollection" Name="Role"/>
		</se:Element>
		<se:Element Class="SingleColumnExternalConstraint">
			<se:ChildElement Name="RoleSequence">
				<se:Link RelationshipName="ConstraintRoleSequenceHasRole" RoleName="RoleCollection"/>
			</se:ChildElement>
			<se:Link RelationshipName="ConstraintRoleSequenceHasRole" RoleName="RoleCollection" Name="Role"/>
		</se:Element>
		<se:Element Class="ExternalUniquenessConstraint" Override="true">
			<se:Link RelationshipName="EntityTypeHasPreferredIdentifier" RoleName="PreferredIdentifierFor" WriteStyle="NotWritten"/>
		</se:Element>
		<se:Element Class="InternalUniquenessConstraint">
			<se:Attribute ID="Name" WriteStyle="NotWritten"/>
			<se:ChildElement Name="RoleSequence">
				<se:Link RelationshipName="ConstraintRoleSequenceHasRole" RoleName="RoleCollection"/>
			</se:ChildElement>
			<se:Link RelationshipName="ConstraintRoleSequenceHasRole" RoleName="RoleCollection" Name="Role"/>
			<se:Link RelationshipName="EntityTypeHasPreferredIdentifier" RoleName="PreferredIdentifierFor" WriteStyle="NotWritten"/>
			<se:Link RelationshipName="InternalUniquenessConstraintHasNMinusOneError" RoleName="NMinusOneError" WriteStyle="NotWritten"/>        
		</se:Element>
		<se:Element Class="SimpleMandatoryConstraint">
			<se:Attribute ID="Name" WriteStyle="NotWritten"/>
			<se:ChildElement Name="RoleSequence">
				<se:Link RelationshipName="ConstraintRoleSequenceHasRole" RoleName="RoleCollection"/>
			</se:ChildElement>
			<se:Link RelationshipName="ConstraintRoleSequenceHasRole" RoleName="RoleCollection" Name="Role"/>
		</se:Element>
		<!--Errors-->
		<se:Element Class="ConstraintDuplicateNameError">
			<se:Link RelationshipName="MultiColumnExternalConstraintHasDuplicateNameError" RoleName="MultiColumnExternalConstraintCollection" Name="Constraint"/>
		</se:Element>
		<se:Element Class="FactTypeDuplicateNameError">
			<se:Link RelationshipName="FactTypeHasDuplicateNameError" RoleName="FactTypeCollection" Name="Facts"/>
		</se:Element>
		<se:Element Class="ObjectTypeDuplicateNameError">
			<se:Link RelationshipName="ObjectTypeHasDuplicateNameError" RoleName="ObjectTypeCollection" Name="Objects"/>
		</se:Element>
		<se:Element Class="ExternalConstraintRoleSequenceArityMismatch">
			<se:Link RelationshipName="MultiColumnExternalConstraintHasExternalConstraintRoleSequenceArityMismatch" RoleName="Constraint" Name="Constraint"/>
		</se:Element>
		<se:Element Class="FactTypeRequiresInternalUniquenessConstraintError">
			<se:Link RelationshipName="FactTypeHasFactTypeRequiresInternalUniquenessConstraintError" RoleName="FactType" Name="Fact"/>
		</se:Element>
		<se:Element Class="FactTypeRequiresReadingError">
			<se:Link RelationshipName="FactTypeHasFactTypeRequiresReadingError" RoleName="FactType" Name="Fact"/>
		</se:Element>
		<se:Element Class="TooFewReadingRolesError">
			<se:Link RelationshipName="ReadingHasTooFewRolesError" RoleName="Reading" Name="Reading"/>
		</se:Element>
		<se:Element Class="TooFewRoleSequencesError">
			<se:Link RelationshipName="ExternalConstraintHasTooFewRoleSequencesError" RoleName="Constraint" Name="Constraint"/>
		</se:Element>
		<se:Element Class="TooManyReadingRolesError">
			<se:Link RelationshipName="ReadingHasTooManyRolesError" RoleName="Reading" Name="Reading"/>
		</se:Element>
		<se:Element Class="TooManyRoleSequencesError">
			<se:Link RelationshipName="ExternalConstraintHasTooManyRoleSequencesError" RoleName="Constraint" Name="Constraint"/>
		</se:Element>
		<se:Element Class="DataTypeNotSpecifiedError">
			<se:Link RelationshipName="ValueTypeHasUnspecifiedDataTypeError" RoleName="ValueTypeHasDataType" Name="ConceptualDataType"/>
		</se:Element>
		<se:Element Class="NMinusOneError">
			<se:Link RelationshipName="InternalUniquenessConstraintHasNMinusOneError" RoleName="Constraint" Name="InternalUniquenessConstraint"/>
		</se:Element>
		<se:Element Class="CompatibleRolePlayerTypeError">
			<se:Link RelationshipName="MultiColumnExternalConstraintHasCompatibleRolePlayerTypeError" RoleName="MultiColumnExternalConstraint" Name="Constraint"/>
		</se:Element>
	</se:Using>
	<se:Using Namespace="Northface.Tools.ORM.ShapeModel">
		<se:MetaModel Class="ORMShapeModel">
			<se:Namespaces>
				<se:Namespace Prefix="ormDiagram" URI="http://Schemas.Northface.edu/ORM/ORMDiagram" DefaultPrefix="true"/>
			</se:Namespaces>
			<se:RootElements>
				<se:RootElement Class="ORMDiagram"/>
			</se:RootElements>
			<se:OmittedMetaElements>
				<se:OmitClass Class="ExternalConstraintLink"/>
				<se:OmitClass Class="ValueRangeLink"/>
				<se:OmitClass Class="RolePlayerLink"/>
				<se:OmitClass Class="SubtypeLink"/>
				<se:OmitRelationship Class="LinkConnectsToNode" Namespace="Microsoft.VisualStudio.Modeling.Diagrams"/>
			</se:OmittedMetaElements>
		</se:MetaModel>
		<se:Element Class="ORMDiagram" SortChildElements="true">
			<se:ChildElement Name="Shapes">
				<se:Link RelationshipName="ParentShapeContainsNestedChildShapes" RoleName="NestedChildShapes"/>
			</se:ChildElement>
			<se:Link Name="Subject" RelationshipName="SubjectHasPresentation" RoleName="Subject"/>
		</se:Element>
		<se:Element Class="ORMBaseShape" SortChildElements="true">
			<se:Attribute ID="IsExpanded" WriteCustomStorage="true"/>
			<se:Attribute ID="AbsoluteBounds" WriteCustomStorage="true"/>
			<se:ChildElement Name="RelativeShapes">
				<se:Link RelationshipName="ParentShapeHasRelativeChildShapes" RoleName="RelativeChildShapes"/>
			</se:ChildElement>
			<se:ChildElement Name="NestedShapes">
				<se:Link RelationshipName="ParentShapeContainsNestedChildShapes" RoleName="NestedChildShapes"/>
			</se:ChildElement>
			<se:Link Name="Subject" RelationshipName="SubjectHasPresentation" RoleName="Subject"/>
		</se:Element>
		<se:Element Class="ObjectTypeShape" Override="true">
			<se:Attribute ID="ShapeName" WriteStyle="NotWritten"/>
			<se:Attribute ID="ReferenceModeName" WriteStyle="NotWritten"/>
		</se:Element>
		<se:Element Class="ObjectifiedFactTypeNameShape" Override="true">
			<se:Attribute ID="ObjectTypeName" WriteStyle="NotWritten"/>
		</se:Element>
		<se:Element Class="ReadingShape" Override="true">
			<se:Attribute ID="ReadingText" WriteStyle="NotWritten"/>
		</se:Element>
		<se:Element Class="ValueRangeShape" Override="true">
			<se:Attribute ID="ValueRangeText" WriteStyle="NotWritten"/>
		</se:Element>
	</se:Using>
</se:CustomSerializedElements>
